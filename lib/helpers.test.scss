@use "sass:list" as list;
@use "sass:map" as map;
@use "sass:meta" as meta;
@use "./helpers" as helpers;

@function test-type() {
  $cases: [
    helpers.type(map, (foo: bar))
    helpers.type(map, ())
    helpers.type(number, 0)
    helpers.type(string, "")
  ];

  @each $result in $cases {
    @if not $result {
      @warn "Expected `true` but got `#{meta.inspect($result)}`";
      @return false;
    }
  }

  @return true;
}

@function test-empty-map() {
  $result: helpers.empty-map();

  @if meta.type-of($result) != map or list.length(map.keys($result)) > 0 {
    @warn "Expected `#{meta.inspect($result)}` to be an empty map";
    @return false;
  }

  @return true;
}

@function test-list-shift() {
  $result: helpers.list-shift([1 2 3 4]);
  $expected: [2 3 4];

  @if $result != $expected {
    @warn "Expected `#{meta.inspect($expected)}` but got `#{meta.inspect($result)}`";
    @return false;
  }

  $result: helpers.list-shift([1 2 3 4], 2);
  $expected: [3 4];

  @if $result != $expected {
    @warn "Expected `#{meta.inspect($expected)}` but got `#{meta.inspect($result)}`";
    @return false;
  }

  @return true;
}

@function test-list-merge() {
  $cases: [
    (input: [[1 2 3] [4 5 6]], output: [1 2 3 4 5 6])
  ];

  @each $case in $cases {
    $result: helpers.list-merge(map.get($case, input)...);
    $expected: map.get($case, output);

    @if $result != $expected {
      @warn "Expected `#{meta.inspect($expected)}` but got `#{meta.inspect($result)}`";
      @return false;
    }
  }

  @return true;
}

@function test-map-list-merge() {
  $map1: (
    foo: foo,
    bar: (
      qux: qux,
      baz: [1 2 3],
      quux: (
        quuz: quuz,
        corge: [one two],
        foo: bar baz,
      )
    ),
  );
  $map2: (
    qux: qux,
    bar: (
      foo: foo,
      baz: [4 5 6],
      quux: (
        quuz: quux,
        corge: [three],
        foo: [bar],
      ),
    ),
  );
  $expected: (
    foo: foo,
    qux: qux,
    bar: (
      foo: foo,
      qux: qux,
      baz: [1 2 3 4 5 6],
      quux: (
        quuz: quux,
        corge: [one two three],
        foo: [bar],
      ),
    ),
  );

  $result: helpers.map-list-merge($map1, $map2);

  @if $result != $expected {
    @warn "Expected `#{meta.inspect($expected)}` but got `#{meta.inspect($result)}`";
    @return false;
  }

  @return true;
}

@function test-combine() {
  $cases: [
    (result: helpers.combine(null), expect: "")
    (result: helpers.combine(""), expect: "")
    (result: helpers.combine([]), expect: "")
    (result: helpers.combine([null]), expect: "")
    (result: helpers.combine([""]), expect: "")
    (result: helpers.combine([foo]), expect: "foo")
    (result: helpers.combine((foo,)), expect: "foo")
    (result: helpers.combine([foo], $separator: _), expect: "foo_")
    (result: helpers.combine([foo bar]), expect: "foobar")
    (result: helpers.combine([foo bar], $separator: _), expect: "foo_bar_")
    (result: helpers.combine((foo bar), $separator: _), expect: "foo_bar_")
    (result: helpers.combine([foo bar], $separator: _, $trailing: false), expect: "foo_bar")
  ];

  @each $case in $cases {
    $result: map.get($case, result);
    $expect: map.get($case, expect);

    @if $result != $expect {
      @warn "Expected `#{meta.inspect($expect)}` but got `#{meta.inspect($result)}`";
      @return false;
    }
  }

  @return true;
}

@function test-color-variants() {
  $result: helpers.color-variants((gray: #adb5bd));

  $expected: (
    gray-100: #232426,
    gray-200: #45484c,
    gray-300: #686d71,
    gray-400: #8a9197,
    gray-500: #adb5bd,
    gray-600: #c6cbd1,
    gray-700: #d6dade,
    gray-800: #e6e9eb,
    gray-900: #f7f8f8,
  );

  @if $result != $expected {
    @warn "Expected `#{$expected}` but got `#{$result}`";
    @return false;
  }

  @return true;
}
