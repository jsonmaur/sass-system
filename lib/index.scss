@use "breakpoints" as breakpoints;
@use "variables" as variables;
@use "generators/color" as color;
@use "generators/font-family" as family;
@use "generators/font-weight" as weight;

$-prefix: null;

/**
 * Puts all prefixed classes into one media query rather than repeating for every generator.
 */
@mixin -prefixes() {
  @content;

  @each $name, $value in variables.$screens {
    $-prefix: $name + "\\:" !global;

    @include breakpoints.media-up-to($name) { @content }
  }

  $-prefix: "dark\\:" !global;

  @if variables.$dark-mode == "media" {
    @media (prefers-color-scheme: dark) {
      @content;
    }
  }
  @if variables.$dark-mode == "class" {
    .dark {
      @content;
    }
  }
}

@include -prefixes {
  @include color.generate($-prefix);
  @include family.generate($-prefix);
  @include weight.generate($-prefix);
}
