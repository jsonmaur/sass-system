@use "sass:meta";
@use "breakpoints";
@use "colors";
@use "variables";

@forward "breakpoints";
@forward "colors";
@forward "prefixer";
@forward "variables";

$-bp: null;

@mixin system() {
  @content;

  @if meta.global-variable-exists("screens", $module: variables)
    and meta.type-of(variables.$screens) == map {

    @each $name, $value in variables.$screens {
      $-bp: $name + "\\:" !global;

      @include breakpoints.media-up-to($name) { @content }
    }
  } @else {
    @error "Expected `$screens` to exist as a map";
  }
}

@include system {
  @include colors.content($-bp);
}
